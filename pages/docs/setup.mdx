# 环境搭建

## NestJS环境搭建

### 安装 Node.js

1. 安装 nvm (Node 版本管理器)

   ```bash
   curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.0/install.sh | bash
   ```
2. 加载 nvm

   ```bash
    export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")"
    [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
    ```

3. 安装 Node.js（可能需要重启终端）

   ```bash
   nvm install 22
   ```

4. 验证环境中是否存在正确的 Node.js 版本

   ```bash
   node -v
   ```

5. 验证环境中是否存在正确的 npm（默认的包管理器） 版本

   ```bash
   npm -v
   ```

6. 安装 pnpm（更先进的包管理器）

   ```bash
   npm install -g pnpm
   ```

### 创建 NestJS 项目

1. 创建项目文件夹：

   ```bash
   mkdir nestjs-project && cd nestjs-project
   # 或
   git clone https://github.com/nestjs/typescript-starter.git .
   ```

2. 安装NestJS CLI：

   ```bash
   pnpm add -g @nestjs/cli
   # 或
   pnpm install -g @nestjs/cli
   ```

3. 创建项目(使用 NestJS CLI 创建项目)：

   ```bash
   nest new .
   ```

4. 安装依赖(根据 package.json 文件中的定义下载对应的依赖项)：

   ```bash
   pnpm i 
   # 或
   pnpm install
   ```

5. 开发模式运行

   使用 pnpm 运行定义在 package.json 中 scripts 字段下的命令:

   ```bash
   pnpm start # 等效于 pnpm run start
   # 或
   pnpm start:dev # 支持热重载
   ```

6. 编译项目
   将 src 目录中的 TypeScript 源文件编译并输出到 dist 目录:

   ```bash
   pnpm build
   ```

7. 生产模式运行
   使用 node 命令执行编译后的 js 文件:

   ```bash
   pnpm start:prod # 等效于 node dist/main.js
   ```
## SpringBoot环境搭建

### 安装 Java 和 Maven

1. 安装 SDKMAN

   SDKMAN 是一个软件开发工具包管理器，用于管理不同版本的 Java SDK 和 Maven。在终端中运行以下命令来安装 SDKMAN：

   ```bash
   curl -s "https://get.sdkman.io" | bash
   ```

   安装完成后，关闭并重新打开终端，或运行以下命令以使 SDKMAN 立即生效：

   ```bash
   source "$HOME/.sdkman/bin/sdkman-init.sh"
   ```

2. 使用 SDKMAN 安装 Java 17(SpringBoot 3.0项目，官方推荐使用 Java 17)：

   安装 Java 17 的最新版本：

   ```bash
   sdk install java 17.0.12-jbr
   ```

3. 验证 Java 安装：

   验证 Java 是否正确安装：

   ```bash
   java -version
   ```

4. 使用 SDKMAN 安装 Maven 3.9.9

   安装特定版本的 Maven：

   ```bash
   sdk install maven 3.9.9
   ```

5. 验证 Maven 安装

   验证 Maven 是否正确安装：

   ```bash
   mvn -version
   ```

### 创建 SpringBoot 项目

1. 使用 Spring Initializr 创建项目

   访问 [Spring Initializr](https://start.spring.io/) 网站，选择项目元数据（如 Group, Artifact），依赖项（如 Spring Web），以及配置（如 Java 17, Maven）。完成后，下载生成的项目压缩包，并解压到你的项目文件夹中。

2. 或者使用 Maven 命令行创建项目

   如果你更喜欢使用命令行，可以使用以下 Maven 命令来生成一个基本的 SpringBoot 项目：

   安装 maven springboot archetype
   ```bash
   git clone git@github.com:elljs/maven-spring-boot-3-archetype.git && cd maven-spring-boot-3-archetype
   mvn install
   ```

   使用 maven archetype 创建项目
   ```bash   
   mvn archetype:generate \
      -DgroupId=com.example \
      -DartifactId=springboot-project \
      -DarchetypeGroupId=com.ell.maven-archetypes \
      -DarchetypeArtifactId=spring-boot-3 \
      -DarchetypeVersion=1.0 \
      -DinteractiveMode=false
   ```

   然后，进入项目目录：

   ```bash
   cd springboot-project
   ```

3. 安装项目依赖

   使用 Maven 安装项目依赖：

   ```bash
   mvn install
   ```

4. 运行 SpringBoot 应用

   使用 Maven 运行 SpringBoot 应用：

   ```bash
   mvn spring-boot:run
   ```

5. 编译项目

   将 Java 源代码编译为字节码：

   ```bash
   mvn compile
   ```

6. 打包项目

   将编译后的字节码打包为一个可执行的 JAR 文件：

   ```bash
   mvn package
   ```

7. 生产模式运行

   使用 Java 命令执行打包后的 JAR 文件：

   ```bash
   java -jar target/springboot-project-3.0.0-SNAPSHOT.jar
   ```